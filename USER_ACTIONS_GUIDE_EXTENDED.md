# Руководство по действиям пользователей - Дополнительные модули

## Оглавление
1. [Роли пользователей](#роли-пользователей)
2. [Модуль Каталог объектов](#модуль-каталог-объектов)
3. [Модуль Инциденты](#модуль-инциденты)
4. [Модуль Чек-листы](#модуль-чек-листы)
5. [Модуль Задачи](#модуль-задачи)
6. [Модуль Бюджет](#модуль-бюджет)
7. [Модуль Техническое диагностирование](#модуль-техническое-диагностирование)
8. [Модуль Ремонты и обслуживание](#модуль-ремонты-и-обслуживание)
9. [Модуль База знаний](#модуль-база-знаний)
10. [Модуль Уведомления](#модуль-уведомления)
11. [Модуль Панель управления](#модуль-панель-управления)
12. [Сквозные процессы](#сквозные-процессы)

---

## Роли пользователей

### 1. SuperAdmin (Суперадминистратор)
**Доступ**: Управление тенантами, глобальные настройки
**Основные задачи**: Создание/удаление организаций, управление подписками

### 2. TenantAdmin (Администратор организации)
**Доступ**: Все модули своей организации
**Основные задачи**: Управление настройками, пользователями, полный доступ к данным

### 3. Manager (Менеджер/Руководитель)
**Доступ**: Большинство модулей с правами создания и редактирования
**Основные задачи**: Управление объектами, инцидентами, задачами, планирование работ

### 4. Auditor (Аудитор/Проверяющий)
**Доступ**: Чек-листы, аудиты, инциденты (создание), просмотр большинства модулей
**Основные задачи**: Проведение проверок, создание инцидентов из результатов аудитов

### 5. Director (Директор)
**Доступ**: Просмотр аналитики, отчетов, панели управления
**Основные задачи**: Мониторинг показателей, принятие решений на основе аналитики

### 6. User (Пользователь)
**Доступ**: Ограниченный, в основном просмотр и выполнение назначенных задач
**Основные задачи**: Выполнение задач, обновление статусов работ

---

## Модуль Каталог объектов

### Раздел: Организации

#### Действие 1: Создать организацию
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Нажать "Добавить организацию"
2. Заполнить данные:
   - Название (обязательно)
   - ИНН (обязательно)
   - КПП
   - Юридический адрес
   - Родительская организация (для построения иерархии)
   - Директор
   - Контактный телефон
   - Email
   - Статус (Активна/Не активна)
3. Нажать "Создать"

**Результат**: 
- Организация добавлена в каталог
- Доступна для привязки объектов
- Отображается в дереве организаций

#### Действие 2: Построить иерархию организаций
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Создать головную организацию (холдинг)
2. При создании дочерних организаций указывать родительскую
3. Система автоматически строит дерево

**Результат**: Иерархическая структура: Холдинг → Юр.лицо → Филиал

---

### Раздел: Промышленные объекты

#### Действие 3: Добавить промышленный объект
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Нажать "Добавить объект"
2. Выбрать тип объекта:
   - ОПО (опасный производственный объект)
   - ГТС (газотранспортная система)
   - Здание
3. Заполнить основные данные:
   - Название (обязательно)
   - Регистрационный номер
   - Организация (выбрать из списка)
   - Адрес
   - Координаты (широта, долгота)
   - Класс опасности (I, II, III, IV)
   - Статус (Активен/Консервация/Ликвидирован)
4. Указать ответственных лиц:
   - Руководитель объекта
   - Ответственный за ПБ
   - Контакты
5. Для ОПО указать дополнительно:
   - Дата регистрации в Ростехнадзоре
   - Виды опасности
   - Максимальное количество опасных веществ
6. Нажать "Создать"

**Результат**: 
- Объект добавлен в каталог
- Доступен для привязки документов, экспертиз, инцидентов
- Отображается на карте (если указаны координаты)

#### Действие 4: Управление документами объекта
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть карточку объекта
2. Перейти в раздел "Документы"
3. Нажать "Добавить документ"
4. Заполнить данные:
   - Тип документа (Паспорт, Сертификат, Заключение ЭПБ, Разрешение, Лицензия)
   - Номер документа
   - Дата выдачи
   - Срок действия
   - Организация-выдатель
   - Прикрепить файл
5. Нажать "Добавить"

**Результат**: 
- Документ прикреплен к объекту
- Система отслеживает срок действия
- Уведомление за 30 дней до истечения

#### Действие 5: Просмотреть объекты с истекающими экспертизами
**Кто может**: Все роли с доступом к модулю
**Шаги**:
1. Открыть модуль "Каталог"
2. Использовать фильтр "Требуют ЭПБ" или "Истекающие экспертизы"
3. Система показывает объекты с датой экспертизы < 90 дней

**Результат**: Список объектов, требующих планирования экспертизы

#### Действие 6: Фильтровать и искать объекты
**Кто может**: Все роли с доступом к модулю
**Шаги**:
1. Использовать поиск по названию, адресу, рег. номеру
2. Фильтры:
   - По типу объекта (ОПО/ГТС/Здание)
   - По классу опасности
   - По статусу
   - По организации
   - По наличию истекающих документов
3. Выбрать режим отображения:
   - Карточки
   - Таблица
   - На карте

**Результат**: Отфильтрованный список объектов

---

## Модуль Инциденты

### Раздел: Инциденты и мероприятия

#### Действие 7: Создать инцидент/предписание
**Кто может**: TenantAdmin, Manager, Auditor
**Шаги**:
1. Перейти на вкладку "Инциденты и мероприятия"
2. Нажать "Добавить инцидент"
3. Заполнить данные:
   - Описание нарушения (обязательно)
   - Корректирующее мероприятие (обязательно)
   - Источник (Внутренняя проверка, Внешняя проверка, Сообщение работника, Аудит)
   - Направление (ПБ, Энергобезопасность, ОТ, Эксплуатация)
   - Категория (1, 2, 3)
   - Подкатегория
   - Тип финансирования (CAPEX, OPEX, Силами площадки)
   - Дата выявления
   - Плановая дата устранения (обязательно)
   - Объект (выбрать из каталога)
   - Ответственный
   - Примечания
4. Нажать "Создать"

**Результат**: 
- Инцидент создан со статусом "Создан"
- Автоматически создается задача (если настроено)
- Ответственный получает уведомление

#### Действие 8: Изменить статус инцидента
**Кто может**: TenantAdmin, Manager, назначенный ответственный
**Шаги**:
1. Открыть инцидент
2. Нажать кнопку изменения статуса:
   - "Начать работу" → статус "В работе"
   - "На согласовании" → статус "Ожидает согласования"
   - "Завершить" → статус "Выполнено" (требуется указать дату фактического выполнения)
3. Подтвердить изменение

**Результат**: 
- Статус обновлен
- Автоматически рассчитывается:
  - Выполнено в срок / с опозданием
  - Количество дней задержки
- Обновляется статистика

#### Действие 9: Работа с канбан-доской
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть вкладку "Инциденты и мероприятия"
2. Переключить режим отображения на "Канбан"
3. Перетаскивать карточки между колонками:
   - Создан
   - В работе
   - Ожидает согласования
   - Просрочен
   - Выполнено
   - Выполнено с опозданием
4. Статус инцидента обновляется автоматически

**Результат**: Визуальное управление инцидентами, быстрое изменение статусов

#### Действие 10: Просмотреть аналитику инцидентов
**Кто может**: Все роли с доступом
**Шаги**:
1. Перейти на вкладку "Аналитика"
2. Выбрать период анализа
3. Просмотреть графики:
   - Распределение по статусам (круговая диаграмма)
   - Распределение по источникам
   - Распределение по направлениям
   - Распределение по категориям
   - Динамика по месяцам (столбчатая диаграмма)
   - Выполнение в срок vs с опозданием
4. Экспортировать данные

**Результат**: Статистика и тренды по инцидентам

#### Действие 11: Использовать тепловую карту
**Кто может**: Все роли с доступом
**Шаги**:
1. Перейти на вкладку "Тепловая карта"
2. Выбрать измерение:
   - По объектам
   - По подразделениям
   - По направлениям
3. Просмотреть визуализацию концентрации инцидентов

**Результат**: Выявление проблемных зон и объектов

#### Действие 12: Генерация отчетов
**Кто может**: TenantAdmin, Manager, Director
**Шаги**:
1. Перейти на вкладку "Отчеты"
2. Выбрать период (месяц, квартал, год, произвольный)
3. Выбрать формат отчета:
   - Сводный отчет по инцидентам
   - Отчет по статусам
   - Отчет по источникам
   - Отчет по направлениям
4. Нажать "Сформировать отчет"
5. Скачать или распечатать

**Результат**: Структурированный отчет с графиками и таблицами

---

### Раздел: Справочники

#### Действие 13: Управление справочниками
**Кто может**: TenantAdmin
**Шаги**:
1. Перейти на вкладку "Справочники"
2. Выбрать справочник:
   - Источники инцидентов
   - Направления
   - Категории
   - Подкатегории
   - Типы финансирования
3. Добавить/редактировать/удалить записи
4. Сохранить изменения

**Результат**: Персонализированные классификаторы для организации

---

## Модуль Чек-листы

### Раздел: Чек-листы

#### Действие 14: Создать чек-лист
**Кто может**: TenantAdmin, Auditor, Manager
**Шаги**:
1. Перейти на вкладку "Чек-листы"
2. Нажать "Создать чек-лист"
3. Заполнить основные данные:
   - Название чек-листа (обязательно)
   - Категория (Пожарная безопасность, Оборудование, СИЗ, Документация, Обучение, Другое)
   - Описание
4. Добавить пункты проверки:
   - Нажать "Добавить пункт"
   - Указать текст вопроса/требования
   - Выбрать критичность (Критично/Важно/Обычное)
   - Указать, требуется ли комментарий
   - Повторить для всех пунктов
5. Нажать "Создать"

**Результат**: 
- Чек-лист создан
- Доступен для проведения аудитов
- Можно сохранить как шаблон

#### Действие 15: Создать шаблон из чек-листа
**Кто может**: TenantAdmin, Auditor
**Шаги**:
1. Открыть существующий чек-лист
2. Нажать "Сохранить как шаблон"
3. Указать название шаблона
4. Подтвердить

**Результат**: 
- Шаблон сохранен
- Можно быстро создавать новые чек-листы на основе шаблона

#### Действие 16: Редактировать чек-лист
**Кто может**: TenantAdmin, Auditor (создатель)
**Шаги**:
1. Найти чек-лист в списке
2. Нажать "Редактировать"
3. Изменить данные или пункты проверки
4. Нажать "Сохранить"

**Результат**: Чек-лист обновлен

---

### Раздел: Аудиты

#### Действие 17: Запланировать аудит
**Кто может**: TenantAdmin, Auditor, Manager
**Шаги**:
1. Перейти на вкладку "Аудиты"
2. Нажать "Запланировать аудит"
3. Заполнить данные:
   - Выбрать чек-лист (обязательно)
   - Дата и время проведения (обязательно)
   - Объект проверки (выбрать из каталога)
   - Аудитор (назначенный)
   - Примечания
4. Нажать "Запланировать"

**Результат**: 
- Аудит создан со статусом "Запланирован"
- Аудитор получает уведомление
- Отображается во вкладке "Предстоящие"

#### Действие 18: Провести аудит
**Кто может**: Назначенный аудитор
**Шаги**:
1. Открыть запланированный аудит
2. Нажать "Начать аудит"
3. Статус изменяется на "В процессе"
4. Для каждого пункта чек-листа:
   - Выбрать результат: Соответствует / Не соответствует / Не применимо
   - Добавить комментарий (если требуется или есть несоответствие)
   - Прикрепить фото (опционально)
5. После проверки всех пунктов нажать "Завершить аудит"
6. Просмотреть сводку:
   - Всего пунктов проверено
   - Соответствует / Не соответствует / Не применимо
   - Критические несоответствия
7. Подтвердить завершение

**Результат**: 
- Аудит завершен со статусом "Завершен"
- Результаты сохранены
- Можно создать инциденты из несоответствий
- Генерируется отчет

#### Действие 19: Создать инциденты из результатов аудита
**Кто может**: TenantAdmin, Auditor
**Шаги**:
1. Открыть завершенный аудит
2. Нажать "Создать инциденты"
3. Система автоматически:
   - Создает инцидент для каждого несоответствия
   - Указывает источник: "Аудит"
   - Заполняет описание из пункта чек-листа
   - Присваивает приоритет на основе критичности
4. Подтвердить создание

**Результат**: 
- Инциденты созданы в модуле "Инциденты"
- Связаны с аудитом через sourceId

#### Действие 20: Просмотреть отчеты по аудитам
**Кто может**: Все роли с доступом
**Шаги**:
1. Перейти на вкладку "Отчеты"
2. Выбрать период
3. Просмотреть аналитику:
   - Количество проведенных аудитов
   - Процент соответствия
   - Распределение по категориям
   - Критические несоответствия
   - Динамика по месяцам
4. Экспортировать отчет

**Результат**: Статистика эффективности системы аудита

---

## Модуль Задачи

#### Действие 21: Создать задачу
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Нажать "Создать задачу"
2. Заполнить данные:
   - Название (обязательно)
   - Описание
   - Приоритет (Критический, Высокий, Средний, Низкий)
   - Тип (Корректирующее мероприятие, Обслуживание, Аудит, Другое)
   - Источник (Инцидент, Аудит, Чек-лист, Вручную)
   - ID источника (если создается из другого модуля)
   - Назначить исполнителя
   - Срок выполнения (обязательно)
   - Объект (выбрать из каталога)
3. Нажать "Создать"

**Результат**: 
- Задача создана со статусом "Открыта"
- Исполнитель получает уведомление
- Отображается во вкладке "Открытые"

#### Действие 22: Начать работу над задачей
**Кто может**: Назначенный исполнитель
**Шаги**:
1. Открыть назначенную задачу
2. Нажать "Начать работу"
3. Статус изменяется на "В работе"

**Результат**: 
- Задача перемещается во вкладку "В работе"
- В timeline добавляется событие "Работа начата"

#### Действие 23: Завершить задачу
**Кто может**: Назначенный исполнитель, TenantAdmin
**Шаги**:
1. Открыть задачу в статусе "В работе"
2. Нажать "Завершить задачу"
3. Добавить комментарий о результатах (опционально)
4. Прикрепить файлы (опционально)
5. Подтвердить

**Результат**: 
- Задача завершена со статусом "Завершена"
- Создатель задачи получает уведомление
- В timeline добавляется событие "Задача завершена"

#### Действие 24: Добавить комментарий к задаче
**Кто может**: Назначенный исполнитель, создатель, TenantAdmin
**Шаги**:
1. Открыть задачу
2. В разделе "Комментарии" написать текст
3. Прикрепить файлы (опционально)
4. Нажать "Отправить"

**Результат**: 
- Комментарий добавлен
- Участники задачи получают уведомление
- Событие добавлено в timeline

#### Действие 25: Изменить приоритет задачи
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть задачу
2. Нажать на текущий приоритет
3. Выбрать новый приоритет
4. Автоматически сохраняется

**Результат**: Приоритет обновлен, событие в timeline

#### Действие 26: Переназначить задачу
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть задачу
2. Нажать "Переназначить"
3. Выбрать нового исполнителя
4. Указать причину (опционально)
5. Подтвердить

**Результат**: 
- Новый исполнитель назначен
- Оба пользователя получают уведомление
- Событие в timeline

#### Действие 27: Фильтровать задачи
**Кто может**: Все роли с доступом
**Шаги**:
1. Использовать вкладки быстрых фильтров:
   - Все задачи
   - Открытые
   - В работе
   - Просроченные
2. Дополнительные фильтры:
   - По приоритету
   - По типу
   - По исполнителю
   - По объекту
3. Поиск по названию и описанию

**Результат**: Отфильтрованный список задач

---

## Модуль Бюджет

### Раздел: Обзор

#### Действие 28: Просмотреть аналитику бюджета
**Кто может**: TenantAdmin, Director, Manager
**Шаги**:
1. Открыть модуль "Бюджет"
2. Выбрать год для анализа
3. Просмотреть сводку:
   - Общий плановый бюджет
   - Фактические расходы
   - Процент освоения
   - Остаток бюджета
4. Графики:
   - Распределение по категориям (круговая)
   - План vs Факт (столбчатая)
   - Динамика расходов по месяцам

**Результат**: Понимание текущего состояния бюджета

---

### Раздел: Планы организаций

#### Действие 29: Создать бюджетный план организации
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Перейти на вкладку "Планы организаций"
2. Нажать "Добавить план"
3. Заполнить данные:
   - Организация (выбрать из каталога)
   - Год
   - Плановые суммы по категориям:
     * Пожарная безопасность
     * Обслуживание оборудования
     * Обучение персонала
     * Экспертизы ПБ
     * СИЗ
     * Прочее
4. Нажать "Создать"

**Результат**: 
- План создан
- Автоматически рассчитывается общая сумма
- Доступен для учета расходов

---

### Раздел: История расходов

#### Действие 30: Добавить расход
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Перейти на вкладку "История расходов"
2. Нажать "Добавить расход"
3. Заполнить данные:
   - Организация
   - Категория бюджета (обязательно)
   - Сумма (обязательно)
   - Дата расхода (обязательно)
   - Описание
   - Номер документа (счет, акт)
   - Контрагент
4. Нажать "Добавить"

**Результат**: 
- Расход учтен
- Обновляется процент освоения в плане
- Обновляется аналитика

#### Действие 31: Редактировать расход
**Кто может**: TenantAdmin, создатель расхода
**Шаги**:
1. Найти расход в истории
2. Нажать "Редактировать"
3. Изменить данные
4. Нажать "Сохранить"

**Результат**: Расход обновлен, пересчитана аналитика

#### Действие 32: Удалить расход
**Кто может**: TenantAdmin
**Шаги**:
1. Найти расход в истории
2. Нажать "Удалить"
3. Подтвердить удаление

**Результат**: Расход удален, пересчитана аналитика

#### Действие 33: Фильтровать расходы
**Кто может**: Все роли с доступом
**Шаги**:
1. Выбрать период (месяц, квартал, год, произвольный)
2. Фильтры:
   - По организации
   - По категории
   - По контрагенту
3. Поиск по описанию, номеру документа

**Результат**: Отфильтрованная история расходов

---

## Модуль Техническое диагностирование

#### Действие 34: Запланировать диагностирование
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Нажать "Запланировать диагностирование"
2. Заполнить данные:
   - Объект (выбрать из каталога) (обязательно)
   - Тип диагностирования:
     * Техническая диагностика
     * Экспертиза промышленной безопасности
     * Неразрушающий контроль
     * Техническое освидетельствование
   - Плановая дата (обязательно)
   - Организация-исполнитель
   - Контактное лицо исполнителя
   - Примечания
3. Нажать "Запланировать"

**Результат**: 
- Диагностирование создано со статусом "Запланировано"
- Отображается в общем списке
- Уведомление за 30 дней до плановой даты

#### Действие 35: Начать проведение
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть запланированное диагностирование
2. Нажать "Начать проведение"
3. Статус изменяется на "В процессе"

**Результат**: Статус обновлен

#### Действие 36: Завершить с загрузкой заключения
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть диагностирование в статусе "В процессе"
2. Нажать "Завершить"
3. Указать фактическую дату завершения
4. Загрузить файл заключения (PDF, DOC)
5. Добавить примечания (опционально)
6. Нажать "Сохранить"

**Результат**: 
- Статус изменен на "Завершено"
- Заключение сохранено и доступно для скачивания
- В каталоге объектов обновляется дата последней экспертизы

#### Действие 37: Просмотреть статистику
**Кто может**: Все роли с доступом
**Шаги**:
1. Просмотреть карточки статистики:
   - Всего диагностирований
   - Запланировано
   - В процессе
   - Завершено
   - Просрочено
2. Фильтровать по:
   - Статусу
   - Типу диагностирования
   - Объекту
   - Периоду

**Результат**: Понимание загрузки и выполнения плана диагностирований

---

## Модуль Ремонты и обслуживание

#### Действие 38: Создать заявку на ТО/ремонт
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Нажать "Создать работу"
2. Заполнить данные:
   - Объект (выбрать из каталога) (обязательно)
   - Тип работы (ТО, Ремонт, Замена)
   - Название работы (обязательно)
   - Описание
   - Плановая дата (обязательно)
   - Исполнитель (организация)
   - Контактное лицо
   - Контактный телефон
   - Примечания
3. Нажать "Создать"

**Результат**: 
- Работа создана со статусом "Запланировано"
- Может быть связана с инцидентом или задачей

#### Действие 39: Начать работы
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть запланированную работу
2. Нажать "Начать работы"
3. Статус изменяется на "В процессе"

**Результат**: Статус обновлен, отображается в фильтре "В процессе"

#### Действие 40: Завершить работы
**Кто может**: TenantAdmin, Manager
**Шаги**:
1. Открыть работу в статусе "В процессе"
2. Нажать "Завершить"
3. Указать фактическую дату завершения
4. Добавить примечания о результатах
5. Прикрепить акт выполненных работ (опционально)
6. Нажать "Сохранить"

**Результат**: 
- Статус изменен на "Завершено"
- Если работа связана с инцидентом - уведомление создателю инцидента
- Обновляется статистика

#### Действие 41: Фильтровать работы
**Кто может**: Все роли с доступом
**Шаги**:
1. Фильтры:
   - По статусу (Все, Запланировано, В процессе, Завершено, Просрочено)
   - По типу работы (ТО, Ремонт, Замена)
   - По объекту
   - По исполнителю
2. Поиск по названию, описанию

**Результат**: Отфильтрованный список работ

---

## Модуль База знаний

### Раздел: Документы

#### Действие 42: Создать документ
**Кто может**: SuperAdmin, TenantAdmin
**Шаги**:
1. Нажать "Добавить документ"
2. Заполнить данные:
   - Название (обязательно)
   - Категория:
     * Руководства пользователя
     * Нормативные документы
     * Документы организации
   - Описание
   - Теги (через запятую)
   - Содержимое (Markdown-редактор)
   - ИЛИ Загрузить файл (PDF, DOC, DOCX)
   - Статус (Черновик/Опубликован)
3. Нажать "Создать"

**Результат**: 
- Документ создан
- Если статус "Опубликован" - виден всем пользователям
- Если "Черновик" - виден только создателю и админам

#### Действие 43: Редактировать документ
**Кто может**: SuperAdmin, TenantAdmin (владелец)
**Шаги**:
1. Открыть документ
2. Нажать "Редактировать"
3. Изменить данные
4. Нажать "Сохранить новую версию"
5. Указать описание изменений

**Результат**: 
- Создана новая версия документа
- Предыдущая версия сохранена в истории
- Номер версии увеличен

#### Действие 44: Просмотреть историю версий
**Кто может**: Все роли с доступом
**Шаги**:
1. Открыть документ
2. Нажать "История версий"
3. Просмотреть список всех версий:
   - Номер версии
   - Дата создания
   - Автор
   - Описание изменений
4. Нажать "Просмотреть" на любой версии

**Результат**: Открывается выбранная версия документа

#### Действие 45: Восстановить предыдущую версию
**Кто может**: SuperAdmin, TenantAdmin (владелец)
**Шаги**:
1. Открыть документ
2. Нажать "История версий"
3. Выбрать нужную версию
4. Нажать "Восстановить эту версию"
5. Подтвердить

**Результат**: 
- Создана новая версия на основе выбранной
- Текущая версия откачена назад

#### Действие 46: Искать документы
**Кто может**: Все роли с доступом
**Шаги**:
1. Ввести поисковый запрос
2. Система ищет по:
   - Названию
   - Описанию
   - Тегам
   - Содержимому (если Markdown)
3. Фильтровать по категории (вкладки)
4. Просмотреть результаты

**Результат**: Список найденных документов

#### Действие 47: Скачать документ
**Кто может**: Все роли с доступом
**Шаги**:
1. Открыть документ
2. Нажать "Скачать" или на название файла
3. Файл загружается на компьютер

**Результат**: 
- Файл скачан
- Счетчик загрузок увеличен на 1

#### Действие 48: Удалить документ
**Кто может**: SuperAdmin, TenantAdmin (владелец)
**Шаги**:
1. Открыть документ
2. Нажать "Удалить"
3. Подтвердить удаление

**Результат**: Документ удален со всеми версиями

---

## Модуль Уведомления

### Раздел: Мои уведомления

#### Действие 49: Просмотреть уведомления
**Кто может**: Все роли
**Шаги**:
1. Нажать на иконку уведомлений (колокольчик)
2. Открывается список уведомлений:
   - Непрочитанные (выделены)
   - Прочитанные
3. Вкладки:
   - Новости платформы
   - Системные уведомления
4. Для каждого уведомления:
   - Тип (иконка и цвет)
   - Заголовок
   - Сообщение
   - Время получения
   - Ссылка (если есть)

**Результат**: Просмотр актуальных уведомлений

#### Действие 50: Отметить как прочитанное
**Кто может**: Все роли
**Шаги**:
1. Нажать на уведомление
2. Автоматически помечается как прочитанное
3. ИЛИ нажать "Отметить все как прочитанные"

**Результат**: 
- Уведомление помечено прочитанным
- Счетчик непрочитанных уменьшен

#### Действие 51: Перейти по ссылке из уведомления
**Кто может**: Все роли
**Шаги**:
1. Нажать на уведомление со ссылкой
2. Система перенаправляет на связанный объект:
   - Инцидент
   - Задача
   - Аудит
   - Объект каталога
   - и т.д.

**Результат**: Открывается связанная сущность

#### Действие 52: Удалить уведомления
**Кто может**: Все роли
**Шаги**:
1. Нажать "Удалить прочитанные"
2. ИЛИ нажать на крестик у конкретного уведомления
3. Подтвердить (если требуется)

**Результат**: Уведомления удалены

---

### Раздел: Создание уведомлений (для админов)

#### Действие 53: Создать уведомление
**Кто может**: SuperAdmin, TenantAdmin
**Шаги**:
1. Перейти в раздел "Создать уведомление"
2. Заполнить данные:
   - Тип (Информация, Предупреждение, Успех, Критично)
   - Источник (Новости платформы, Система)
   - Заголовок (обязательно)
   - Сообщение (обязательно)
   - Ссылка (опционально)
3. Выбрать получателей:
   - **SuperAdmin**: Все пользователи / Все тенанты / Конкретные пользователи
   - **TenantAdmin**: Все пользователи тенанта / Конкретные пользователи
4. Нажать "Отправить"

**Результат**: 
- Уведомления созданы для выбранных пользователей
- Запись добавлена в историю
- Пользователи видят уведомление в своей ленте

#### Действие 54: Просмотреть историю отправок
**Кто может**: SuperAdmin, TenantAdmin
**Шаги**:
1. Перейти в раздел "История отправок"
2. Просмотреть все отправленные уведомления:
   - Дата и время отправки
   - Заголовок и сообщение
   - Отправитель
   - Количество получателей
3. Фильтровать по дате, типу

**Результат**: Аудит всех отправленных уведомлений

---

## Модуль Панель управления

#### Действие 55: Просмотреть панель управления
**Кто может**: Все роли кроме SuperAdmin
**Шаги**:
1. Открыть главную страницу (Dashboard)
2. Просмотреть виджеты:
   - **Статистика объектов**: Всего, Активные, Требуют ЭПБ
   - **Статистика задач**: Открытые, В работе, Просроченные
   - **Статистика инцидентов**: Открытые, В работе, Просроченные
   - **Предстоящие экспертизы**: Список ближайших 10
   - **Компетенции персонала**: Процент соответствия
   - **Последние активности**: История действий в системе
   - **Критические задачи**: Задачи с критическим приоритетом
   - **График задач**: Динамика по месяцам
   - **График инцидентов**: Динамика по месяцам
   - **Календарь дедлайнов**: Предстоящие события
   - **Виджет уведомлений**: Последние уведомления

**Результат**: Общая картина состояния системы

#### Действие 56: Генерация отчетов с панели
**Кто может**: TenantAdmin, Director, Manager
**Шаги**:
1. Выбрать период для отчета (месяц, квартал, год, произвольный)
2. Выбрать тип отчета:
   - Общий отчет по дашборду
   - Отчет по задачам
   - Отчет по инцидентам
   - Отчет по экспертизам
   - Отчет по организациям
3. Нажать "Сформировать отчет"
4. Скачать в формате PDF или Excel

**Результат**: Структурированный отчет с аналитикой

#### Действие 57: Быстрая навигация по модулям
**Кто может**: Все роли
**Шаги**:
1. Кликнуть на виджет или статистическую карточку
2. Система перенаправляет в соответствующий модуль:
   - Клик на "Объекты" → Каталог
   - Клик на "Задачи" → Модуль Задачи
   - Клик на "Инциденты" → Модуль Инциденты
   - и т.д.
3. Автоматически применяется соответствующий фильтр

**Результат**: Быстрый переход к нужным данным

#### Действие 58: Просмотреть календарь дедлайнов
**Кто может**: Все роли
**Шаги**:
1. На панели управления открыть виджет "Календарь дедлайнов"
2. Просмотреть предстоящие события:
   - Задачи
   - Экспертизы
   - Диагностирования
   - Аудиты
   - Истечение сертификатов
3. Клик на событие открывает детали

**Результат**: Планирование работы на основе дедлайнов

---

## Сквозные процессы

### Процесс 5: От выявления нарушения до устранения

**Участники**: Auditor, Manager, User (исполнитель)

**Шаги**:

1. **[Auditor] Проведение аудита**
   - Создание чек-листа (Действие 14)
   - Планирование аудита (Действие 17)
   - Проведение проверки (Действие 18)
   - Выявление несоответствий

2. **[Auditor] Создание инцидентов**
   - Создание инцидентов из несоответствий (Действие 19)
   - Система автоматически заполняет данные
   - Инциденты создаются со статусом "Создан"

3. **[Manager] Планирование устранения**
   - Просмотр инцидентов в модуле Инциденты
   - Назначение ответственного
   - Установка плановой даты устранения
   - Выбор типа финансирования

4. **[Manager] Создание задачи**
   - Система автоматически создает задачу из инцидента (Действие 21)
   - Задача связана с инцидентом через sourceId
   - Исполнитель назначен

5. **[User] Выполнение работ**
   - Начало работы над задачей (Действие 22)
   - Если требуется ремонт/ТО:
     * Создание заявки в модуле Обслуживание (Действие 38)
     * Начало работ (Действие 39)
     * Завершение работ (Действие 40)
   - Добавление комментариев о ходе работ (Действие 24)

6. **[User] Завершение задачи**
   - Завершение задачи (Действие 23)
   - Прикрепление документов о выполнении

7. **[Manager] Закрытие инцидента**
   - Проверка результатов
   - Изменение статуса инцидента на "Завершено" (Действие 8)
   - Указание фактической даты устранения

**Результат процесса**:
- Нарушение устранено
- Задача и инцидент завершены
- Документы о выполнении сохранены
- Статистика обновлена

---

### Процесс 6: Планирование и проведение экспертизы ПБ

**Участники**: Manager, TenantAdmin, внешняя организация

**Шаги**:

1. **[Система] Уведомление о приближении срока**
   - За 90 дней до истечения срока экспертизы
   - Уведомление менеджерам и админам
   - Объект отображается в фильтре "Требуют ЭПБ" в Каталоге (Действие 5)

2. **[Manager] Планирование экспертизы**
   - Открыть модуль Техническое диагностирование
   - Запланировать диагностирование (Действие 34)
   - Выбрать объект из каталога
   - Тип: "Экспертиза промышленной безопасности"
   - Назначить организацию-исполнителя
   - Установить плановую дату

3. **[TenantAdmin] Учет в бюджете**
   - Открыть модуль Бюджет
   - Проверить наличие средств в категории "Экспертизы ПБ"
   - Если недостаточно - корректировка плана (Действие 29)
   - Добавить расход после оплаты (Действие 30)

4. **[Manager] Начало проведения**
   - Начать проведение экспертизы (Действие 35)
   - Статус изменяется на "В процессе"

5. **[Внешняя организация] Проведение экспертизы**
   - Фактическое проведение работ
   - Оформление заключения

6. **[Manager] Завершение и загрузка документов**
   - Завершить с загрузкой заключения (Действие 36)
   - Загрузить PDF-файл заключения ЭПБ
   - Указать фактическую дату завершения

7. **[Система] Обновление данных**
   - В Каталоге объектов обновляется дата последней экспертизы
   - Рассчитывается новая дата следующей экспертизы (через 5 лет для класса III-IV)
   - Объект удаляется из фильтра "Требуют ЭПБ"
   - Уведомление установится на новый срок

**Результат процесса**:
- Экспертиза проведена в срок
- Документы загружены и доступны
- Данные объекта обновлены
- Бюджет учтен

---

### Процесс 7: Управление бюджетом организации

**Участники**: TenantAdmin, Manager, Director

**Шаги**:

1. **[TenantAdmin] Планирование бюджета на год**
   - Открыть модуль Бюджет
   - Создать план для каждой организации (Действие 29)
   - Распределить плановые суммы по категориям:
     * Пожарная безопасность
     * Обслуживание оборудования
     * Обучение персонала
     * Экспертизы ПБ
     * СИЗ
     * Прочее

2. **[Manager] Учет расходов в течение года**
   - При возникновении расхода:
     * Добавить расход (Действие 30)
     * Указать категорию, сумму, дату
     * Прикрепить подтверждающие документы
   - Расходы из других модулей:
     * При планировании экспертизы - добавить расход
     * При оплате обучения - добавить расход
     * При закупке СИЗ - добавить расход

3. **[Director/TenantAdmin] Мониторинг освоения**
   - Регулярно (ежемесячно) просматривать аналитику (Действие 28)
   - Отслеживать процент освоения по категориям
   - Выявлять перерасход или недорасход
   - Генерировать отчеты для руководства

4. **[TenantAdmin] Корректировка плана**
   - При необходимости перераспределения средств:
     * Редактировать план организации (Действие 29)
     * Увеличить лимит по одной категории
     * Уменьшить по другой
   - Обосновать корректировки

5. **[Director] Анализ эффективности**
   - В конце года просмотреть итоговую аналитику
   - Сравнить план и факт
   - Принять решения для планирования следующего года

**Результат процесса**:
- Прозрачность расходования бюджета
- Контроль освоения средств
- Своевременные корректировки
- Данные для планирования будущих периодов

---

### Процесс 8: Работа с базой знаний

**Участники**: TenantAdmin, все пользователи

**Шаги**:

1. **[TenantAdmin] Создание структуры знаний**
   - Создать документы по категориям (Действие 42):
     * Руководства пользователя (инструкции по работе с системой)
     * Нормативные документы (законы, ГОСТы, СНиПы)
     * Документы организации (регламенты, политики, инструкции)
   - Добавить теги для удобного поиска
   - Опубликовать документы

2. **[Пользователи] Поиск информации**
   - Открыть модуль База знаний
   - Искать по названию, тегам (Действие 46)
   - Фильтровать по категориям
   - Просматривать документы

3. **[Пользователи] Использование документов**
   - Читать содержимое
   - Скачивать файлы (Действие 47)
   - Делиться ссылками с коллегами

4. **[TenantAdmin] Обновление документов**
   - При изменении законодательства или процессов:
     * Редактировать документ (Действие 43)
     * Создать новую версию с описанием изменений
     * Опубликовать обновление
   - Пользователи видят актуальную версию
   - История версий сохраняется (Действие 44)

5. **[TenantAdmin] Восстановление при ошибке**
   - Если обновление содержит ошибку:
     * Открыть историю версий (Действие 44)
     * Восстановить предыдущую версию (Действие 45)
     * Внести правки и опубликовать заново

6. **[Система] Аналитика использования**
   - Отслеживание:
     * Количество просмотров каждого документа
     * Количество загрузок
   - TenantAdmin видит популярные темы
   - Принимает решения о развитии базы знаний

**Результат процесса**:
- Централизованное хранилище знаний
- Актуальная информация для всех сотрудников
- История изменений документов
- Понимание востребованности тем

---

## Права доступа по ролям (расширенная таблица)

| Действие | SuperAdmin | TenantAdmin | Manager | Auditor | Director | User |
|----------|------------|-------------|---------|---------|----------|------|
| **Каталог объектов** |
| Создать организацию | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Создать объект | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Редактировать объект | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Удалить объект | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Просмотр объектов | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| Управление документами | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| **Инциденты** |
| Создать инцидент | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| Редактировать инцидент | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Удалить инцидент | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Изменить статус | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ (свои) |
| Управление справочниками | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Просмотр аналитики | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Чек-листы и Аудиты** |
| Создать чек-лист | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| Создать шаблон | ✅ | ✅ | ❌ | ✅ | ❌ | ❌ |
| Запланировать аудит | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| Провести аудит | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| Создать инциденты из аудита | ✅ | ✅ | ❌ | ✅ | ❌ | ❌ |
| Просмотр отчетов | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| **Задачи** |
| Создать задачу | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Редактировать задачу | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Переназначить задачу | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Начать/завершить задачу | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ (свои) |
| Добавить комментарий | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ (свои) |
| Просмотр всех задач | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| **Бюджет** |
| Создать план | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Редактировать план | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Добавить расход | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Редактировать расход | ✅ | ✅ | ✅ (свои) | ❌ | ❌ | ❌ |
| Удалить расход | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Просмотр аналитики | ✅ | ✅ | ✅ | ❌ | ✅ | ❌ |
| **Техническое диагностирование** |
| Запланировать | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Начать/завершить | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Загрузить заключение | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Просмотр | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Ремонты и обслуживание** |
| Создать работу | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| Начать/завершить | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ (свои) |
| Просмотр | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ (свои) |
| **База знаний** |
| Создать документ | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Редактировать документ | ✅ | ✅ (свои) | ❌ | ❌ | ❌ | ❌ |
| Удалить документ | ✅ | ✅ (свои) | ❌ | ❌ | ❌ | ❌ |
| Управление версиями | ✅ | ✅ (свои) | ❌ | ❌ | ❌ | ❌ |
| Просмотр/скачивание | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Уведомления** |
| Создать глобальные | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| Создать для тенанта | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |
| Просмотр/управление | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Панель управления** |
| Просмотр дашборда | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| Генерация отчетов | ❌ | ✅ | ✅ | ❌ | ✅ | ❌ |

---

## Примечания

1. **Автоматизация**: Система автоматически создает задачи из инцидентов, уведомления о дедлайнах
2. **Интеграция модулей**: Данные из Каталога используются в Инцидентах, Задачах, Диагностировании, Обслуживании
3. **Версионирование**: База знаний поддерживает полную историю изменений документов
4. **Аналитика**: Модули Инциденты, Бюджет, Чек-листы предоставляют детальную аналитику
5. **Уведомления**: Автоматические уведомления о дедлайнах, истечении сертификатов, новых задачах
6. **Права доступа**: Гибкая система ролей с разными уровнями доступа к функционалу
