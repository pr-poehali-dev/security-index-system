# Руководство пользователя: Управление подрядчиками

## 🎯 Назначение модуля

Модуль "Управление подрядчиками" предназначен для:
- Ведения реестра подрядных организаций
- Учета персонала подрядчиков и их аттестаций
- Контроля соответствия сотрудников требованиям объектов
- Управления доступом персонала к промышленным объектам

---

## 🚀 Быстрый старт

### Как открыть модуль:
1. В боковом меню найдите раздел **"Каталог"**
2. Под ним откройте **"Подрядчики"**
3. Или перейдите напрямую по адресу: `/contractors`

---

## 📋 Вкладка "Организации"

### Как добавить подрядчика:

1. **Нажмите кнопку "Добавить подрядчика"** (правый верхний угол)

2. **Заполните форму:**

   **Основная информация:**
   - Название организации * (обязательно)
   - ИНН * (обязательно)
   - КПП
   - Юридический адрес
   - Фактический адрес

   **Контактные данные:**
   - ФИО директора
   - Телефон
   - Email

   **Договор:**
   - Номер договора
   - Сумма договора (руб.)
   - Дата договора
   - Срок действия до

   **Допуски и разрешения:**
   - Виды работ (через запятую: Монтаж, Ремонт, Диагностика)
   - Номер допуска СРО
   - Срок действия СРО до
   - Номер страхового полиса
   - Страховка действует до

   **Дополнительно:**
   - Статус (Активен / Приостановлен / Заблокирован / Архив)
   - Примечания

3. **Нажмите "Создать"**

### Карточки подрядчиков показывают:
- ✅ **Рейтинг** (звезды от 0 до 5)
- 📋 **Данные договора** с индикаторами:
  - 🟢 Нормально: срок действия > 30 дней
  - 🟠 Скоро истечет: < 30 дней
  - 🔴 Истек: договор просрочен
- 👤 **Директора и контакты**
- 🔧 **Виды работ** (бейджи)
- ⚙️ **Кнопки**: Изменить, Удалить

### Поиск и фильтрация:
- 🔍 **Поиск** по названию или ИНН
- 🎯 **Фильтры**: Все / Активные / Приостановлены

---

## 👥 Вкладка "Персонал"

### Как добавить сотрудника:

1. **Нажмите кнопку "Добавить сотрудника"**

2. **Заполните форму:**

   **Основная информация:**
   - Подрядная организация * (выбрать из списка)
   - ФИО * (обязательно)
   - Должность
   - Телефон
   - Email

   **Документы:**
   - Серия паспорта
   - Номер паспорта
   - СНИЛС

   **Медицинский осмотр:**
   - Дата медосмотра
   - Действителен до
   - ⚠️ Система покажет предупреждения об истечении

   **Обучение по пожарной безопасности:**
   - Дата обучения
   - Действительно до

   **Обучение по охране труда:**
   - Дата обучения
   - Действительно до

   **Дополнительно:**
   - Статус (Активен / Приостановлен / Заблокирован / Уволен)
   - Примечания

3. **Нажмите "Создать"**

### Таблица сотрудников показывает:
- 👤 **ФИО и должность**
- 🏢 **Подрядчик**
- 🏥 **Медосмотр** с индикаторами:
  - 🟢 Действителен
  - 🟠 Истекает < 30 дней (с датой)
  - 🔴 Истек
  - ⚪ Не указано
- 🔥 **Обучение ПБ** (с индикаторами)
- 🦺 **Обучение ОТ** (с индикаторами)
- 🎓 **Аттестации** (кнопка "Просмотр")
- 📊 **Статус**

### Поиск и фильтрация:
- 🔍 **Поиск** по ФИО
- 🏢 **Фильтр** по подрядчику (выпадающий список)
- 🎯 **Фильтр** по статусу (Все / Активные)

---

## 🎓 Управление аттестациями

### Как добавить аттестацию:

1. **В таблице сотрудников нажмите "Просмотр"** в колонке "Аттестации"

2. **В открывшемся окне нажмите "Добавить аттестацию"**

3. **Заполните форму:**
   - **Область аттестации** * (выбрать из списка):
     
     **Промышленная безопасность:**
     - А.1 - Подъемные сооружения
     - Б.1 - Котлонадзор
     - Б.7 - Холодильные установки
     - Г.1 - Нефтегазодобывающие производства
     - И другие...

     **Энергобезопасность:**
     - ЭБ.1 - Электроэнергетика
     - ЭБ.4 - Газоснабжение
     - И другие...

     **Охрана труда:**
     - ОТ.1 - Работы на высоте
     - ОТ.3 - Электробезопасность
     - И другие...

     **Экология:**
     - ЭК.1 - Обращение с отходами I-IV класса
     - И другие...

   - Номер сертификата
   - Орган выдачи (например: Ростехнадзор)
   - Дата выдачи *
   - Действительна до *
   - Ссылка на документ (опционально)

4. **Нажмите "Добавить"**

### Карточки аттестаций показывают:
- 🎓 **Область аттестации** (код и полное название)
- 📊 **Статус**:
  - 🟢 Действует (> 90 дней)
  - 🟠 Истекает (≤ 90 дней, с указанием количества дней)
  - 🔴 Истекла
- 📋 **Номер сертификата**
- 🏢 **Орган выдачи**
- 📅 **Даты** выдачи и истечения
- 🔗 **Ссылка** на документ (если есть)
- 🗑️ **Кнопка удаления**

---

## 🔐 Вкладка "Доступ к объектам"

### Как предоставить доступ сотруднику:

1. **Нажмите кнопку "Предоставить доступ"**

2. **Заполните форму:**

   **Основная информация:**
   - Сотрудник * (выбрать из активных)
   - Объект * (выбрать из каталога)
   
   **Период доступа:**
   - Доступ с * (дата начала)
   - Доступ до (оставьте пустым для бессрочного)
   
   **Дополнительно:**
   - Вид работ (Монтаж, Ремонт, и т.д.)
   - Примечания

3. **Система автоматически проверит соответствие:**
   - ✅ Зеленая карточка = Сотрудник соответствует всем требованиям
   - ⚠️ Оранжевая карточка = Есть предупреждения (истекающие аттестации)
   - ❌ Красная карточка = Не соответствует (нет нужных аттестаций/документов)

4. **Нажмите "Предоставить доступ"**

### Таблица доступа показывает:
- 👤 **Сотрудник** (ФИО, должность)
- 🏭 **Объект** (название, класс опасности)
- 🔧 **Вид работ**
- 📅 **Период доступа** с индикаторами:
  - 🟢 Нормально (> 30 дней)
  - 🟠 Истекает (≤ 30 дней, с указанием дней)
  - 🔴 Истек срок
  - ♾️ Бессрочно
- 📊 **Статус** (Активен / Приостановлен / Отозван / Истек)
- ✅ **Соответствие требованиям** (автоматическая проверка)

### Как отозвать доступ:

1. **В таблице нажмите кнопку с иконкой "Запрет"** (Ban)
2. **Укажите причину отзыва** (обязательно)
3. **Подтвердите действие**

Отозванный доступ нельзя восстановить - нужно создать новый.

### Поиск и фильтрация:
- 🔍 **Поиск** по сотруднику или объекту
- 🏭 **Фильтр** по объекту (выпадающий список)
- 🎯 **Фильтр** по статусу (Все / Активен / Приостановлен / Истек / Отозван)

---

## 🎯 Индикаторы и предупреждения

### Цветовая система:

| Цвет | Значение | Что показывает |
|------|----------|----------------|
| 🟢 Зеленый | Нормально | Документ действителен, до истечения > 30 дней (для обучения/медосмотра) или > 90 дней (для аттестаций) |
| 🟠 Оранжевый | Предупреждение | Документ истекает в течение 30 дней (обучение/медосмотр) или 90 дней (аттестации) |
| 🔴 Красный | Критично | Документ истек |
| ⚪ Серый | Не указано | Дата не заполнена |

### Где отображаются индикаторы:
1. **В карточках подрядчиков**: Срок действия договора, СРО, страховки
2. **В таблице сотрудников**: Медосмотр, обучение ПБ, обучение ОТ
3. **В форме сотрудника**: Рядом с полями "Действителен до"
4. **В карточках аттестаций**: Статус аттестации

---

## 💡 Полезные советы

### Для эффективной работы:

1. **Регулярно проверяйте истекающие документы**
   - Используйте фильтры для поиска
   - Обращайте внимание на оранжевые и красные индикаторы

2. **Заполняйте все обязательные поля**
   - Это обеспечит корректную работу системы контроля доступа
   - Особенно важны даты истечения документов

3. **Используйте понятные названия**
   - При указании видов работ будьте конкретны
   - Это упростит поиск нужного подрядчика

4. **Добавляйте аттестации сразу**
   - После найма сотрудника подрядчика
   - Это позволит системе контролировать допуски

5. **Проверяйте рейтинги**
   - Обращайте внимание на рейтинг подрядчиков
   - Низкий рейтинг может указывать на проблемы

---

## 🔧 Частые вопросы

### Как изменить данные подрядчика?
Нажмите кнопку "Изменить" на карточке подрядчика, внесите изменения и нажмите "Сохранить".

### Как удалить подрядчика?
Нажмите кнопку с иконкой корзины на карточке подрядчика. Подтвердите удаление. ⚠️ Это действие удалит всех сотрудников подрядчика!

### Как найти сотрудников конкретного подрядчика?
На вкладке "Персонал" используйте выпадающий список "Подрядчик" для фильтрации.

### Как добавить несколько аттестаций одному сотруднику?
Откройте диалог аттестаций сотрудника и добавляйте по одной аттестации. Можно добавить неограниченное количество.

### Что делать, если аттестация истекла?
1. Удалите старую аттестацию (кнопка корзины)
2. Добавьте новую с актуальными датами
3. Или обновите статус сотрудника на "Приостановлен" до переаттестации

### Можно ли восстановить удаленного сотрудника?
Нет, удаление необратимо. Будьте внимательны при удалении данных.

### Как система проверяет соответствие требованиям?
При назначении на объект система автоматически проверяет:
- Наличие требуемых аттестаций для класса опасности объекта
- Актуальность медосмотра
- Актуальность обучения ПБ и ОТ
- Сроки истечения всех документов

### Что делать, если сотрудник не соответствует требованиям?
1. Добавьте недостающие аттестации
2. Обновите даты медосмотра и обучений
3. Попробуйте назначить снова - система автоматически проверит соответствие

### Можно ли отозвать доступ?
Да, нажмите кнопку "Запрет" в таблице доступа, укажите причину и подтвердите. Отозванный доступ нельзя восстановить.

---

## 🚧 Что в разработке

### Скоро будет доступно:

1. **Реальная интеграция с модулем "Каталог"**
   - Загрузка объектов из базы данных
   - Автоматическое определение требований по классу опасности
   - Виджет персонала на странице объекта
   - Настройка требуемых компетенций для каждого объекта
   - Автоматические предложения на основе класса опасности

3. **Уведомления**
   - За 30 дней до истечения аттестаций
   - За 60/30/7 дней до истечения договора
   - При истечении допуска СРО

4. **Отчеты и аналитика**
   - Рейтинг подрядчиков
   - Персонал на объектах
   - Истекающие документы
   - Расходы на подрядчиков

5. **Интеграция с другими модулями**
   - Назначение задач сотрудникам подрядчиков
   - Учет инцидентов по подрядчикам (влияние на рейтинг)
   - Учет расходов на подрядные работы в бюджете

---

## 📞 Поддержка

Если у вас возникли вопросы или проблемы:
1. Проверьте этот раздел документации
2. Обратитесь к администратору системы
3. Сообщите о проблеме в службу поддержки

---

**Версия документа:** 1.0  
**Дата обновления:** ${new Date().toLocaleDateString('ru-RU')}